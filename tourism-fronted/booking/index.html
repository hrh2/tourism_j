<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="./css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <meta charset="utf-8">
    <title>Booking</title>
    <link rel="icon" href="images/Plane.png">
</head>
<body>
    <header>
        <div class="logo">
            <div class="plane"><img src="./images/Plane-green.png"></div>
            <h2>Dream Discover</h2>
        </div>
        <nav>
            <a href="../homepage.html">Home</a>
            <a href="#">Booking</a>
            <a href="../aboutus.html">About us</a>
            <a href="../contacts.html">Contact us</a>
        </nav>
        <div class=bell>
            <img src="./images/bell.png" class="bells">
            <div class="person">
                <img src="./images/security-user 1.png">
            </div>
        </div>
    </header>
    <div class="secure">
        <h2>Secure your reservation</h2>
    </div>
    <form id="booking-form">
        <div class="container">
            <div class=room>
                <div class=head>
                    <div class=security>
                        <img src="./images/security-user 1.png">
                    </div>
                    <h3>Personal information</h3>
                    <h4>make a reservation</h4>
                </div>
                <div class=x>
                    <div class=name1>
                        <label for="firstName">First name</label>
                        <input type="text" name="firstName" id="first" required>
                    </div>
                    <div class=name2>
                        <label for="lastName">Last name</label>
                        <input type="text" name="lastName" id="last" required>
                    </div>
                </div>
                <div class=y>
                    <div class=code>
                        <label for="code">Mobile number</label>
                        <input type="text" name="code" id="code" required placeholder="+250">
                    </div>
                    <div class=number>
                        <input type="text" name="phoneNumber" id="number" required>
                    </div>
                </div>
                <div class=email>
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email" required>
                </div>
                <div class=alerts>
                    <input type="checkbox" name="checkbox" id="check" value="yes">
                    <h5>Receive text alerts about this trip</h4>
                </div>
            </div>
        </div>
        <div class="book">
            <div class=head>
                <h4>Details</h4>
            </div>
            <div class=city>
                <div class=dep>
                    <label for="city">Departure City</label>
                    <input type="text" name="departureCity" id="depart" required>
                </div>
                <div class=arr>
                    <label for="city">Arrival City</label>
                    <input type="text" name="arrivalCity" id="arrive" required>
                </div>
            </div>
            <div class=dat>
                <div class=in>
                    <label for="checkin">Checkin Date</label>
                    <input type="date" name="checkInDate" id="in" required>
                </div>
                <div class=out>
                    <label for="checkout">Checkout Date</label>
                    <input type="date" name="checkOutDate" id="out" required>
                </div>
            </div>
            <div class=other>
                <div class=guest>
                    <label for="gueset">Guests</label>
                    <input type="text" name="numberOfPeople" id="guest" required>
                </div>
                <div class=activity>
                    <label for="activity">Activity</label>
                    <input type="text" name="activitySelection" id="activity" required>
                </div>
            </div>
            <div class=currentp>
                <label for="preferences">Current preferences</label>
                <input type="text" name="currentPreferences" id="pref" required>
            </div>
            <div class=special>
                <label for="requests">Special requests</label>
                <input type="text" name="specialRequest" id="req" required>
            </div>
            <div class=hotel>
                <label for="hotel">Hotel reservation</label><br>
                <input type="radio" name="hotelRoomReservation" id="hotel" value="true" required>Yes<br>
                <input type="radio" name="hotelRoomReservation" id="hotel" value="false" required>No<br>
            </div>
            <div class=flight>
                <label for="flight">Flight reservation</label><br>
                <input type="radio" name="flightReservation" id="flight" value="true" required>Yes<br>
                <input type="radio" name="flightReservation" id="flight" value="false" required>No<br>
            </div>
        </div>

        <div class=info>
            <div class=head>
                <h4>Important information about your booking</h4>
            </div>
            <h5>1. This rate is non-refundable. If you change or cancel your booking you will not get a refund or credit
                to
                use for a future stay.<br>2. Stay extensions will require a new reservation.<br>3. Front desk staff will
                greet guests on arrival.<br>4. No refunds will be issued for late check-in or early check-out.</h4>
                <h6>By clicking the button below, I acknowledge that I have reviewed the <a href="#">Privacy
                        Statement</a>
                    and have<br> reviewd and accept the <a href=#>Rules and Restrictions</a> and <a href=#>Terms of
                        Use</a>
            </h5>

            <button type="submit">Complete booking</button>
            <div id="showResponse"> </div>
            <div class=a>
                <img src="./images/lock-circle 1.png">
                <h6>We use secure transmission and encrypted storage to protect your personal information</h6>
            </div>
        </div>

    </form>
    <div class="footer">
        <div class="foot1">
            <div class="foot">
                <img src="images/Plane-green.png">
                <h4>Dream Discover</h4>
            </div>

            <p>Your next goto companion <br>for travel</p>
            <p>&copy; Dream Discover 2023</p>

        </div>

        <div class="foot2">
            <h4>Quick links</h4>
            <ul type="none">
                <li>About Us</li>
                <li>Explore</li>
                <li>Booking</li>
                <li>Contact Us</li>
            </ul>

        </div>

        <div class="foot3">
            <h4>Countries</h4>
            <ul type="none">
                <li>Rwanda</li>
                <li>Australia</li>
                <li>Italy</li>
                <li>Greece</li>
                <li>Maldives</li>
                <li>Switzerland</li>
                <li><a href="#">See more</a></li>
            </ul>

        </div>

        <div class="foot4">
            <h4>Terms and Policies</h4>
            <ul type="none">
                <li>Privacy Policy</li>
                <li>Terms of use</li>
                <li>Accessibility</li>
            </ul>

        </div>

        <div class="foot5">
            <h4>Help</h4>
            <ul type="none">
                <li>Support</li>
                <li>Cancel your bookings</li>
                <li>Refund Policies</li>
            </ul>
        </div>

    </div>
</body>
<script>
    // Convert Form Data to JSON
    function formDataToJson(formData) {
        const jsonData = {};
        formData.forEach((value, key) => {
            jsonData[key] = value;
        });
        return JSON.stringify(jsonData);
    }

    document.getElementById('booking-form').addEventListener('submit', function (event) {
        event.preventDefault(); // Prevent default form submission

        // Collect form data
        const form = event.target;
        const formData = new FormData(form);
        //change them to json data
        const jsonData = formDataToJson(formData);

        // Send the POST request to the server
        fetch('http://localhost:3003/api/bookings', {
            method: 'POST',
            body: jsonData,
            headers: {
                'Content-Type': 'application/json' // Added this line to specify the content type 
            }
        })
            .then(response => response.json())
            .then(data => {
                // Handle the response data here if needed
                //console.log(data);
                document.getElementById('showResponse').innerText=`${JSON.stringify(data.message)}`;
                // You can show a success message or redirect the user to another page
            })
            .catch(error => {
                // Handle any errors
                console.error('Error:', error);
                document.getElementById('showResponse').innerText=`${JSON.stringify(error.message)}`;

            });
    });
    //ibidakenewe ubivanemo
</script>


</html>